{"componentChunkName":"component---src-templates-post-tsx","path":"/2013-07-18-jailkit-prevent-connection-root-directories-using-sftp/","webpackCompilationHash":"9503e7c8eb5699e4b614","result":{"data":{"markdownRemark":{"html":"<p>전용뷰어 보기\n기존에 ftp 쓸때는 해당 폴더외에 접근허용이 안된다.\n하지만 sftp로 접속하면 어떤 유저도 / 까지도 볼 수 있게된다.</p>\n<p>jailkit 은 그걸 막아준다.\nsshd5.x 부터는 chroot 로도 가능한데. 3시간동안 해봐도 안되길래 그냥 이걸로했다. 쉽고 편하고 빠르다.</p>\n<p>CentOS 6.3 기준 설치방법</p>\n<p>저장소를 추가하고 다음과 같이 간단하게 설치해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># wget http://apt.sw.be/redhat/el6/en/x86_64/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm</span>\n\n<span class=\"token comment\"># rpm -Uvh rpmforge-release\\*rpm</span>\n\n<span class=\"token comment\"># yum install jailkit</span></code></pre></div>\n<p>이제 사용자를 추가해서 막아보자.\n/home/jail 은 가둬둘 곳.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># jk_init -v -j /home/jail sftp scp jk_lsh</span>\n\n<span class=\"token comment\"># adduser user_name; passwd user_name</span>\n\n<span class=\"token comment\"># jk_jailuser -m -j /home/jail user_name</span>\n\n<span class=\"token comment\"># vi /home/jail/etc/jailkit/jk_lsh.ini</span></code></pre></div>\n<p>아래 내용 추가.</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token selector\">[user_name]</span>\n<span class=\"token constant\">paths</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> /usr/libexec/openssh/</span>\n<span class=\"token constant\">executables</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> /usr/libesec/openssh/sftp-server</span>\n<span class=\"token constant\">allow_word_expansion</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> 0</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># sftp user_name@localhost</span></code></pre></div>\n<p>sftp> 라고 나오면 성공이다 !</p>\n<p>jailkit 이 해주는 일은 cp ls 같은걸 실행할 수 있도록 관련 라이브러리 복사 등등인것 같다.</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"전용뷰어 보기\n기존에 ftp 쓸때는 해당 폴더외에 접근허용이 안된다.\n하지만 sftp로 접속하면 어떤 유저도 / 까지도 볼 수 있게된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"jailkit 은 그걸 막아준다.\nsshd5.x 부터는 chroot 로도 가능한데. 3시간동안 해봐도 안되길래 그냥 이걸로했다. 쉽고 편하고 빠르다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"CentOS 6.3 기준 설치방법"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"저장소를 추가하고 다음과 같이 간단하게 설치해준다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# wget http://apt.sw.be/redhat/el6/en/x86_64/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# rpm -Uvh rpmforge-release\\*rpm"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# yum install jailkit"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 사용자를 추가해서 막아보자.\n/home/jail 은 가둬둘 곳."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# jk_init -v -j /home/jail sftp scp jk_lsh"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# adduser user_name; passwd user_name"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# jk_jailuser -m -j /home/jail user_name"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# vi /home/jail/etc/jailkit/jk_lsh.ini"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"아래 내용 추가."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"ini"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-ini"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-ini"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","selector"]},"children":[{"type":"text","value":"[user_name]"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"paths"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","attr-value"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" /usr/libexec/openssh/"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"executables"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","attr-value"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" /usr/libesec/openssh/sftp-server"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"allow_word_expansion"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","attr-value"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" 0"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# sftp user_name@localhost"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"sftp> 라고 나오면 성공이다 !"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"jailkit 이 해주는 일은 cp ls 같은걸 실행할 수 있도록 관련 라이브러리 복사 등등인것 같다."}]}],"data":{"quirksMode":false}},"excerpt":"전용뷰어 보기\n기존에 ftp 쓸때는 해당 폴더외에 접근허용이 안된다.\n하지만 sftp로 접속하면 어떤 유저도 / 까지도 볼 수 있게된다. jailkit 은 그걸 막아준다.\nsshd5.x 부터는 chroot 로도 가능한데. 3시간동안 해봐도 안되길래 …","timeToRead":1,"frontmatter":{"title":"jailkit로 sftp 사용할 때 root 접근 못하게 하기","userDate":"2013 July 18","date":"2013-07-18 14:45:04 +0900","tags":["jailkit","sftp","centos","linux"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABvZz2DDBZnRUA8wr/xAAaEAEBAAIDAAAAAAAAAAAAAAABABAhETFB/9oACAEBAAEFAjoNxew3OB2Y/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQETD/2gAIAQEABj8CLwU//8QAHRABAAICAgMAAAAAAAAAAAAAAQAhEUEQMVGBkf/aAAgBAQABPyHJyD7Dpp3jfHXEB2rxMhuXQosAxYLG9krDqf/aAAwDAQACAAMAAAAQvMrP/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAIBABAAMAAAYDAAAAAAAAAAAAAQARIRAxQVFhcYGx8P/aAAgBAQABPxDlRftBAVvB6PeEuBU1AlNLvsjgQe2NXSlogXbTp8TaYa5cpf5jNEFq88cD/9k=","aspectRatio":0.6960725075528701,"src":"/static/eccc6f8a0d254bba439789ec31657700/3c063/brandi-redd-aJTiW00qqtI-unsplash.jpg","srcSet":"/static/eccc6f8a0d254bba439789ec31657700/f8f18/brandi-redd-aJTiW00qqtI-unsplash.jpg 930w,\n/static/eccc6f8a0d254bba439789ec31657700/0e6ff/brandi-redd-aJTiW00qqtI-unsplash.jpg 1860w,\n/static/eccc6f8a0d254bba439789ec31657700/3c063/brandi-redd-aJTiW00qqtI-unsplash.jpg 3456w","sizes":"(max-width: 3456px) 100vw, 3456px"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2013-07-18-jailkit-prevent-connection-root-directories-using-sftp/","prev":{"excerpt":"전용뷰어 보기\n프린트하는 곳들 보면 거의다 activeX 로 익스플로러 브라우저 접근해서 강제로 조절하는데\nIE 8 이상부터, 크롬 및 다른 브라우저들은 이렇게 여백컨트롤 할수 있다. size 는 IE 에서 안된다. activex 하나하나 없애가자 …","timeToRead":1,"frontmatter":{"title":"HTML페이지 인쇄 시 여백 제어하기","tags":["html","css","print"],"date":"2013-07-13 14:47:53 +0900","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":0.6960725075528701,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABvZz2DDBZnRUA8wr/xAAaEAEBAAIDAAAAAAAAAAAAAAABABAhETFB/9oACAEBAAEFAjoNxew3OB2Y/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQETD/2gAIAQEABj8CLwU//8QAHRABAAICAgMAAAAAAAAAAAAAAQAhEUEQMVGBkf/aAAgBAQABPyHJyD7Dpp3jfHXEB2rxMhuXQosAxYLG9krDqf/aAAwDAQACAAMAAAAQvMrP/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAIBABAAMAAAYDAAAAAAAAAAAAAQARIRAxQVFhcYGx8P/aAAgBAQABPxDlRftBAVvB6PeEuBU1AlNLvsjgQe2NXSlogXbTp8TaYa5cpf5jNEFq88cD/9k=","sizes":"(max-width: 3456px) 100vw, 3456px","src":"/static/eccc6f8a0d254bba439789ec31657700/3c063/brandi-redd-aJTiW00qqtI-unsplash.jpg","srcSet":"/static/eccc6f8a0d254bba439789ec31657700/f8f18/brandi-redd-aJTiW00qqtI-unsplash.jpg 930w,\n/static/eccc6f8a0d254bba439789ec31657700/0e6ff/brandi-redd-aJTiW00qqtI-unsplash.jpg 1860w,\n/static/eccc6f8a0d254bba439789ec31657700/3c063/brandi-redd-aJTiW00qqtI-unsplash.jpg 3456w"}}}},"fields":{"layout":"post","slug":"/2013-07-13-control-space-in-print-html-pages/","collection":"content"}},"next":{"excerpt":"자세한 설명은 생략한다.","timeToRead":1,"frontmatter":{"title":"MySql 에서 암호화 복호화 참고","tags":["mysql","encryption","decryption"],"date":"2013-08-07 11:02:09 +0900","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":0.6960725075528701,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABvZz2DDBZnRUA8wr/xAAaEAEBAAIDAAAAAAAAAAAAAAABABAhETFB/9oACAEBAAEFAjoNxew3OB2Y/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQETD/2gAIAQEABj8CLwU//8QAHRABAAICAgMAAAAAAAAAAAAAAQAhEUEQMVGBkf/aAAgBAQABPyHJyD7Dpp3jfHXEB2rxMhuXQosAxYLG9krDqf/aAAwDAQACAAMAAAAQvMrP/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAIBABAAMAAAYDAAAAAAAAAAAAAQARIRAxQVFhcYGx8P/aAAgBAQABPxDlRftBAVvB6PeEuBU1AlNLvsjgQe2NXSlogXbTp8TaYa5cpf5jNEFq88cD/9k=","sizes":"(max-width: 3456px) 100vw, 3456px","src":"/static/eccc6f8a0d254bba439789ec31657700/3c063/brandi-redd-aJTiW00qqtI-unsplash.jpg","srcSet":"/static/eccc6f8a0d254bba439789ec31657700/f8f18/brandi-redd-aJTiW00qqtI-unsplash.jpg 930w,\n/static/eccc6f8a0d254bba439789ec31657700/0e6ff/brandi-redd-aJTiW00qqtI-unsplash.jpg 1860w,\n/static/eccc6f8a0d254bba439789ec31657700/3c063/brandi-redd-aJTiW00qqtI-unsplash.jpg 3456w"}}}},"fields":{"layout":"post","slug":"/2013-08-07-encryption-and-decryption-in-mysql/","collection":"content"}},"primaryTag":"jailkit"}}}