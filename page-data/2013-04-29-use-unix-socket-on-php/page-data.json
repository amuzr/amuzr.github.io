{"componentChunkName":"component---src-templates-post-tsx","path":"/2013-04-29-use-unix-socket-on-php/","webpackCompilationHash":"82ca2e05f691c3292b71","result":{"data":{"markdownRemark":{"html":"<p>nginx 와 php-fpm 을 연동할 때 지금은 크게 차이가 없지만 예전에는 아래처럼하는게 속도차이가 확연히 났다고 한다.</p>\n<p><code class=\"language-text\">fastcgi_pass 127.0.0.1:9000</code></p>\n<p>구글링해보니 크게 성능차이는 없는것 같지만 그래도 이게 좋다고 하니 다 바꿔봤다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># vi /etc/php-fpm.d/www.conf</span></code></pre></div>\n<p>…\nlisten = 127.0.0.1:9000\n…이부분을 아래처럼</p>\n<p>;listen = 127.0.0.1:9000\nlisten = /tmp/php5-fpm.sock</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># vi /etc/nginx/conf.d/virtual.conf</span></code></pre></div>\n<p>…\nfastcgi_pass 127.0.0.1:9000\n…이부분을 아래처럼</p>\n<p>fastcgi_pass unix:/tmp/php5-fpm.sock</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># service php-fpm reload</span>\n\n<span class=\"token comment\"># service nginx restart</span></code></pre></div>\n<p>php5-fpm.sock 파일이 없어서 뭐지뭐지했는데 기본으로 TCP포트를 사용하고 있다면 자동으로 생성된다!~</p>\n<p>속도가 빨라진건지 아직 잘모르겠다.</p>\n<p>덧. 보안이슈 해결을 위해 아래와 같이 try_files ~ 부분 한줄을 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> location ~ \\.php$ {\n       try_files $uri =404;\n       fastcgi_pass unix:/var/run/php5-fpm.sock;\n       fastcgi_index index.php;\n       fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n       include fastcgi_params;\n   }</code></pre></div>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"nginx 와 php-fpm 을 연동할 때 지금은 크게 차이가 없지만 예전에는 아래처럼하는게 속도차이가 확연히 났다고 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"fastcgi_pass 127.0.0.1:9000"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"구글링해보니 크게 성능차이는 없는것 같지만 그래도 이게 좋다고 하니 다 바꿔봤다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# vi /etc/php-fpm.d/www.conf"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"…\nlisten = 127.0.0.1:9000\n…이부분을 아래처럼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":";listen = 127.0.0.1:9000\nlisten = /tmp/php5-fpm.sock"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# vi /etc/nginx/conf.d/virtual.conf"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"…\nfastcgi_pass 127.0.0.1:9000\n…이부분을 아래처럼"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"fastcgi_pass unix:/tmp/php5-fpm.sock"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# service php-fpm reload"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# service nginx restart"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"php5-fpm.sock 파일이 없어서 뭐지뭐지했는데 기본으로 TCP포트를 사용하고 있다면 자동으로 생성된다!~"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"속도가 빨라진건지 아직 잘모르겠다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"덧. 보안이슈 해결을 위해 아래와 같이 try_files ~ 부분 한줄을 추가한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":" location ~ \\.php$ {\n       try_files $uri =404;\n       fastcgi_pass unix:/var/run/php5-fpm.sock;\n       fastcgi_index index.php;\n       fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n       include fastcgi_params;\n   }"}]}]}]}],"data":{"quirksMode":false}},"excerpt":"nginx 와 php-fpm 을 연동할 때 지금은 크게 차이가 없지만 예전에는 아래처럼하는게 속도차이가 확연히 났다고 한다.  구글링해보니 크게 성능차이는 없는것 같지만 그래도 이게 좋다고 하니 다 바꿔봤다. …\nlisten = 127.0.0.1:9…","timeToRead":1,"frontmatter":{"title":"use unix socket on php","userDate":"2013 April 29","date":"2013-04-29 09:58:47 +0900","tags":["unix_socket","php","linux","centos"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2013-04-29-use-unix-socket-on-php/","prev":{"excerpt":"회사들어와서 가장먼저 리눅스를 건들게 된 계기가 된 요 두 프로그램. 간단하게 얘네가 뭐하는 놈들이냐 하면. Jira 는 국내에 더 많이 알려진 redmine 같은 프로그램이다. 이슈들을 등록하고 관리하고 뭐 그런것들이고 플러그인들이 좋은게 너무많다…","timeToRead":6,"frontmatter":{"title":"JIRA 와 Confluence war로 설치하기","tags":["tools","jira","confluence","wiki","war"],"date":"2013-04-08 11:17:54 +0900","draft":false},"fields":{"layout":"post","slug":"/2013-04-08-install-jira-and-confluence-by-war/"}},"next":{"excerpt":"알고보면 너무 간단한데 역시 네이버에서는 검색하기가 어렵다.. 이클립스 커뮤니티 포럼에 좋은 댓글이 있어서 퍼왔다. JGit 은 자바 구현체,라이브러리 즉 java 로 git을 이것저것 할수있다.\nEGit 은 이클립스에서 git 을 사용할 수 있게 …","timeToRead":1,"frontmatter":{"title":"EGit과 JGit의 차이","tags":["git"],"date":"2013-05-02 08:58:33 +0900","draft":false},"fields":{"layout":"post","slug":"/2013-05-02-differencewithegitandjgit/"}},"primaryTag":"unix_socket"}}}