{"componentChunkName":"component---src-templates-post-tsx","path":"/2013-03-28-install-nginxphpfpmmysql-on-centos6-yum/","webpackCompilationHash":"8a9853d4bfb9140402ff","result":{"data":{"markdownRemark":{"html":"<p>기존에 회사에서 아파치 httpd-2.2, php-5.2, mysql-5.1 을 사용하다가 자주 뻗기도 하고 방법을 찾기 어려웠다.\n결국 SSD 달린 새서버로 바꾸게 되어 nginx를 써보기로 했다.\n바이너리 설치도 있지만 기왕 최신껄 쓰는김에 계속 업데이트 해주는 방법을 쓰기로 결정.</p>\n<h4>설치할 환경 및 버전</h4>\n<ul>\n<li>centos 6.3(64bit) : 가능하면 최신으로 쓰기 위해 6.3으로 설치했다. 5.x 로도 비슷한방법으로 설치가능</li>\n<li>nginx-1.2.7 : stable 최신버전 이고 1.3.x 개발버전이 있다.</li>\n<li>php-5.3.23 : 기존 프로그램이 5.4로 바로올렸을때 strict 에러가 많이 나기 때문에 결정. 처음 설치하는거면 5.4를 해도 무방하다.</li>\n<li>mysql-5.5.31 : 현재 5.6은 바이너리로 설치만 가능한것 같다.</li>\n</ul>\n<p>처음 centos 설치 후 아무 세팅이 되어있지 않은 상태에서 root 권한으로 진행을 하도록 한다.\n먼저 프로그램들을 전부 update 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shall\"><pre class=\"language-shall\"><code class=\"language-shall\">#yum update</code></pre></div>\n<p>그리고 <code class=\"language-text\">yum repolist</code>를 설정해 주어야 한다.\n최종 목표는 아래와 같이되면 된다.</p>\n<p><img src=\"%7B%7B%20site.url%20%7D%7D/assets/repolist.png\"></p>\n<h5>Atomic 저장소 설치</h5>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#wget -q -O - http://www.atomicorp.com/installers/atomic | sh</code></pre></div>\n<h5>RHEL EPEL 저장소 설치</h5>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\nwget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm\nsudo rpm -Uvh remi-release-6*.rpm epel-release-6*.rpm</code></pre></div>\n<p>항상 <code class=\"language-text\">remi</code>저장소를 사용하기 위해서는 <code class=\"language-text\">yum.repos.d</code> 디렉토리에서 <code class=\"language-text\">remi.repo enabled = 1</code> 로 바꾸어 주면 된다.</p>\n<h5>nginx 저장소 설치</h5>\n<p><code class=\"language-text\">nginx</code> 저장소는 <code class=\"language-text\">yum.repos.d</code> 에 직접 파일을 추가해주어야 한다(<code class=\"language-text\">/etc/yum.repos.d/nginx.repo</code>)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=0\nenabled=1</code></pre></div>\n<p>이제 저장소가 다 등록이 되어 간단하게 <code class=\"language-text\">yum</code> 으로 설치할 수 있다.\n아래와 같이 입력</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#yum install nginx\n#yum --enablerepo=remi install php php-fpm php-mysql mysql-server mysql-devel</code></pre></div>\n<p>보면서 <code class=\"language-text\">y</code> 를 눌러주면되고 <code class=\"language-text\">-y</code>옵션을 주어도 좋다.</p>\n<p>필요에 따라 php 모듈도 설치한다. (기본적으로는 설치되지 않는다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#yum install php-gd php-mcrypt php-pear</code></pre></div>\n<p>방화벽 예외처리를 해주고</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#iptables -I INPUT -p tcp --dport 80 -j ACCEPT\n#iptables -I OUTPUT -p tcp --sport 80 -j ACCEPT</code></pre></div>\n<p>서비스에 대몬 등록</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/sbin/chkconfig nginx on\n/sbin/chkconfig mysqld on\n/sbin/chkconfig php-fpm on</code></pre></div>\n<p>서비스 시작 재시작 중지는 아래와 같이한다. <code class=\"language-text\">(start | restart | stop)</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/etc/init.d/nginx start\n/etc/init.d/php-fpm start\n/etc/init.d/mysql start</code></pre></div>\n<p><code class=\"language-text\">/etc/init.d/</code> 대신 <code class=\"language-text\">service 이름</code> 으로 입력해도 좋다.</p>\n<p>그리고 MySQL root 계정 비밀번호 설정을 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/usr/bin/mysqladmin -uroot password &#39;new-password&#39;</code></pre></div>\n<p>각종 에러로그 확인은 아래와 같이 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/var/log/nginx/error.log\n/var/log/php-fpm/error.log\n/var/log/mysqld.log</code></pre></div>\n<p>nginx 와 php-fpm 을 연결하고 virtual-host 설정하는 부분은 다음 포스트에 이어서 작성하도록 하겠다.</p>\n<p>참고 : <a href=\"http://blog.debug.so/entry/How-to-setuo-nginx-php-mysql-Korean\">NPM설치</a>,<a href=\"http://www.rackspace.com/knowledge_center/article/installing-rhel-epel-repo-on-centos-5x-or-6x\">저장소설치1</a>,<a href=\"http://pat.im/924\">저장소설치2</a>,<a href=\"http://www.i-swear.com/148\">방화벽예외처리</a></p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기존에 회사에서 아파치 httpd-2.2, php-5.2, mysql-5.1 을 사용하다가 자주 뻗기도 하고 방법을 찾기 어려웠다.\n결국 SSD 달린 새서버로 바꾸게 되어 nginx를 써보기로 했다.\n바이너리 설치도 있지만 기왕 최신껄 쓰는김에 계속 업데이트 해주는 방법을 쓰기로 결정."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"설치할 환경 및 버전"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"centos 6.3(64bit) : 가능하면 최신으로 쓰기 위해 6.3으로 설치했다. 5.x 로도 비슷한방법으로 설치가능"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"nginx-1.2.7 : stable 최신버전 이고 1.3.x 개발버전이 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"php-5.3.23 : 기존 프로그램이 5.4로 바로올렸을때 strict 에러가 많이 나기 때문에 결정. 처음 설치하는거면 5.4를 해도 무방하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"mysql-5.5.31 : 현재 5.6은 바이너리로 설치만 가능한것 같다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"처음 centos 설치 후 아무 세팅이 되어있지 않은 상태에서 root 권한으로 진행을 하도록 한다.\n먼저 프로그램들을 전부 update 해준다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shall"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shall"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shall"]},"children":[{"type":"text","value":"#yum update"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그리고 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"yum repolist"}]},{"type":"text","value":"를 설정해 주어야 한다.\n최종 목표는 아래와 같이되면 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"%7B%7B%20site.url%20%7D%7D/assets/repolist.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h5","properties":{},"children":[{"type":"text","value":"Atomic 저장소 설치"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#wget -q -O - http://www.atomicorp.com/installers/atomic | sh"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h5","properties":{},"children":[{"type":"text","value":"RHEL EPEL 저장소 설치"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\nwget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm\nsudo rpm -Uvh remi-release-6*.rpm epel-release-6*.rpm"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"항상 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"remi"}]},{"type":"text","value":"저장소를 사용하기 위해서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"yum.repos.d"}]},{"type":"text","value":" 디렉토리에서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"remi.repo enabled = 1"}]},{"type":"text","value":" 로 바꾸어 주면 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h5","properties":{},"children":[{"type":"text","value":"nginx 저장소 설치"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nginx"}]},{"type":"text","value":" 저장소는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"yum.repos.d"}]},{"type":"text","value":" 에 직접 파일을 추가해주어야 한다("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etc/yum.repos.d/nginx.repo"}]},{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=0\nenabled=1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 저장소가 다 등록이 되어 간단하게 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"yum"}]},{"type":"text","value":" 으로 설치할 수 있다.\n아래와 같이 입력"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#yum install nginx\n#yum --enablerepo=remi install php php-fpm php-mysql mysql-server mysql-devel"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"보면서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"y"}]},{"type":"text","value":" 를 눌러주면되고 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-y"}]},{"type":"text","value":"옵션을 주어도 좋다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"필요에 따라 php 모듈도 설치한다. (기본적으로는 설치되지 않는다.)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#yum install php-gd php-mcrypt php-pear"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"방화벽 예외처리를 해주고"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#iptables -I INPUT -p tcp --dport 80 -j ACCEPT\n#iptables -I OUTPUT -p tcp --sport 80 -j ACCEPT"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서비스에 대몬 등록"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/sbin/chkconfig nginx on\n/sbin/chkconfig mysqld on\n/sbin/chkconfig php-fpm on"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서비스 시작 재시작 중지는 아래와 같이한다. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"(start | restart | stop)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etc/init.d/nginx start\n/etc/init.d/php-fpm start\n/etc/init.d/mysql start"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etc/init.d/"}]},{"type":"text","value":" 대신 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"service 이름"}]},{"type":"text","value":" 으로 입력해도 좋다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그리고 MySQL root 계정 비밀번호 설정을 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/usr/bin/mysqladmin -uroot password 'new-password'"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"각종 에러로그 확인은 아래와 같이 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/var/log/nginx/error.log\n/var/log/php-fpm/error.log\n/var/log/mysqld.log"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"nginx 와 php-fpm 을 연결하고 virtual-host 설정하는 부분은 다음 포스트에 이어서 작성하도록 하겠다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"참고 : "},{"type":"element","tagName":"a","properties":{"href":"http://blog.debug.so/entry/How-to-setuo-nginx-php-mysql-Korean"},"children":[{"type":"text","value":"NPM설치"}]},{"type":"text","value":","},{"type":"element","tagName":"a","properties":{"href":"http://www.rackspace.com/knowledge_center/article/installing-rhel-epel-repo-on-centos-5x-or-6x"},"children":[{"type":"text","value":"저장소설치1"}]},{"type":"text","value":","},{"type":"element","tagName":"a","properties":{"href":"http://pat.im/924"},"children":[{"type":"text","value":"저장소설치2"}]},{"type":"text","value":","},{"type":"element","tagName":"a","properties":{"href":"http://www.i-swear.com/148"},"children":[{"type":"text","value":"방화벽예외처리"}]}]}],"data":{"quirksMode":false}},"excerpt":"기존에 회사에서 아파치 httpd-2.2, php-5.2, mysql-5.1 을 사용하다가 자주 뻗기도 하고 방법을 찾기 어려웠다.\n결국 SSD 달린 새서버로 바꾸게 되어 nginx를 써보기로 했다.\n바이너리 설치도 있지만 기왕 최신껄 쓰는김에 계속…","timeToRead":2,"frontmatter":{"title":"CentOS6 에 yum 으로 nginx + php-fpm + mysql 설치하기","userDate":"2013 March 28","date":"2013-03-28 14:54:43 +0900","tags":["linux","nginx","php","mysql","centos"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2013-03-28-install-nginxphpfpmmysql-on-centos6-yum/","prev":{"excerpt":"사용해서 이미지를 보내줄 때\n헤더 내용 중  값이 없어서 (-1 리턴)  로 보내준다.  Apach Http 서버일때는  라도 그냥 처리를 해주었기 때문에문제가 없었지만,\nnginx 는 1.3.9 버전 이후부터 처리가 가능하다.\n그 이하 버전에서는 …","timeToRead":1,"frontmatter":{"title":"nginx 411 length required error","tags":["android","nginx"],"date":"2013-03-27 21:18:13 +0900","draft":false},"fields":{"layout":"post","slug":"/2013-03-27-nginx-411-length-required-error/"}},"next":{"excerpt":"php나 jsp 개발시 디비연결을 할때 보통 로컬환경에서는 localhost로 연결을 한다.\nwindows 7 까지는 IPv4 와 IPv6 를 같이 쓰기 때문에 localhost로 연결하게 되면 127.0.0.1 으로 잘 연결이 된다. 하지만 ! w…","timeToRead":1,"frontmatter":{"title":"Windows8 에서 mysql 느려지는 문제","tags":["windows8","mysql","slow"],"date":"2013-04-02 10:39:28 +0900","draft":false},"fields":{"layout":"post","slug":"/2013-04-02-mysql-slow-on-windows8/"}},"primaryTag":"linux"}}}